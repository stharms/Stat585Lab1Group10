---
title: "Lab 1"
authors: "Steve Harms, Yudi Zhang, Gulzina Kuttubekova, Atousa Zarindast"
date: "January 28, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

<<<<<<< HEAD

## More weather data

The file ushcn.tavg.latest.raw.tar.gz at ftp://ftp.ncdc.noaa.gov/pub/data/ushcn/v2.5 contains data on average temperatures across the US. 

2. We have dowonloaded the file, trying to unzip it:
```{r}
files <- untar("ushcn.tavg.latest.raw.tar.gz", list = TRUE)
files
```
From the output above we see that there are 1218 files in total: the first row represent the host folder - "ushcn.v2.5.5.20190204". Host folder contains 1218 files in it. 

Now, we will try to find the specific file which contains the temperature data of my hometown or Fort Dodge IA:
```{r}
library(purrr)
library(dplyr)
# choose IA state stations:
stations %>% filter(STATE == "IA") %>% select(NAME) -> ia_stations
ia_stations
# find the COOP ID:
fort_coop_id <- stations$`COOP ID`[grep("FORT", ia_stations$NAME)]
fort_coop_id

# download and save the file as data.frame
fort_dodge_stations <- read_delim(paste("ushcn.v2.5.5.20190204/", fort_coop_id, ".raw.tavg", sep = ""), delim = " ", col_names = FALSE)
dim(fort_dodge_stations)
```



=======
```{r}
library(tidyverse)
stations <- read_fwf(file = "./ushcn-v2.5-stations.txt", fwf_widths(c(11, 10, 10, 6, 4, 30, 7, 7, 7, 5), c("COOP ID", "LATITUDE", "LONGITUDE", "ELEVATION", "STATE", "NAME", "COMPONENT 1", "COMPONENT 2", "COMPONENT 3", "UTC OFFSET")))

```
>>>>>>> 9d58dee7a73de06d570e21b73705e60822b83c23


